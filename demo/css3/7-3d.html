<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>6-css3折纸</title>
    <style>
        #wrap {
            width: 160px;
            margin: 30px auto;
            position: relative;
            -webkit-perspective: 800px;
            -webkit-transform-style: preserve-3d;
        }
        
        #wrap h2 {
            height: 40px;
            background: #f60;
            color: #fff;
            font: bold 16px/40px '微软雅黑';
            text-align: center;
            margin: 0;
            position: relative;
            z-index: 10;
        }
        
        #wrap div {
            position: absolute;
            top: 32px;
            left: 0;
            width: 100%;
            -webkit-transform-origin: top;
            -webkit-transform-style: preserve-3d;
            -webkit-transform: rotateX(-120deg);
        }
        
        #wrap span {
            display: block;
            height: 30px;
            background: #9f0;
            font: 14px/30px '宋体';
            color: #fff;
            text-indent: 20px;
            box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 1.0);
            transition: 1s;
        }
        
        #wrap>div {
            top: 40px;
        }
        #wrap .show {-webkit-animation:2s open;  -webkit-transform: rotateX(0deg);}
        #wrap .show>span{   box-shadow: inset 0 0 0 20px rgba(0, 0, 0, 0);}
         #wrap .hide {-webkit-animation:0.8s close;  -webkit-transform: rotateX(-120deg);}
         /* #wrap .hide>span{   transition: 1s;} */
        @-webkit-keyframes open{
        	0%{
        		 -webkit-transform: rotateX(-120deg);
        	}
        	25%{
        		-webkit-transform: rotateX(30deg);
        	}
        	50%{
        		-webkit-transform: rotateX(-15deg);
        	}
        	75%{
        		-webkit-transform: rotateX(8deg);
        	}
        	100%{
        		 -webkit-transform: rotateX(0deg);
        	}
        }
        @-webkit-keyframes close{
        	0%{
        		 -webkit-transform: rotateX(0deg);
        	}
        	100%{
        		 -webkit-transform: rotateX(-120deg);
        	}
        }

    </style>
</head>

<body>
<input type="button" value="按钮" id="btn">
    <div id="wrap">
        <h2>我是标题</h2>
        <div >
            <span>菜单1</span>
            <div >
                <span>菜单2</span>
                <div >
                    <span>菜单3</span>
                    <div >
                        <span>菜单4</span>
                        <div >
                            <span>菜单5</span>
                            <div >
                                <span>菜单6</span>
                                <div >
                                    <span>菜单7</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
	var oBtn = document.getElementById('btn');
	var oWrap = document.getElementById('wrap');
	var aDiv = oWrap.getElementsByTagName('div');
	var oH2 = oWrap.getElementsByTagName('h2')[0];
	var iDelay = 150;
	var oTimer = null;
	var i = 0;
	var onOff = true;
	oH2.onclick = function(){
		/*for(var i=0; i<aDiv.length; i++){
			aDiv[i].className = 'show';
		}*/
		if(oTimer){
			return;
		}
		if(onOff){
			i = 0;
			oTimer  = setInterval(function(){
				aDiv[i].className = 'show';
				i++;
				if(i==aDiv.length){
					clearInterval(oTimer);
					oTimer = null;
					onOff = false;
				}
			},iDelay);
		}else{
			i = aDiv.length-1;
			oTimer  = setInterval(function(){
				aDiv[i].className = 'hide';
				i--;
				if(i<0){
					clearInterval(oTimer);
					oTimer = null;
					onOff = true;
				}
			},iDelay);
		}
		
	}
</script>
</html>
